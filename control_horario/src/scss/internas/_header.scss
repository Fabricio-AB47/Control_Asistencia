@use '../base/variables' as v;
@use '../base/mixins' as m;
@use "sass:color";

/* ===== Header ===== */
.header {
  background-color: v.$gris;
  padding: .6rem;
  text-align: center;
  border: 4px solid v.$gris_oscuro;
  display: flex;
  justify-content: center;
  align-items: center;
  position: relative;

  /* En tablet+ el header compensa el ancho de la sidebar */
  @include m.tablet {
    justify-content: flex-start;
    padding-left: calc(1rem + 250px);
  }
  @include m.desktop {
    padding-left: calc(1rem + 280px);
  }
}

/* Logo */
.logo {
  width: 120px;
  height: auto;
  


  @include m.telefono { width: 140px; }
  @include m.tablet   { width: 150px; }
  @include m.desktop  { width: 170px; }
}

/* ===== Menú Responsive ===== */
.contenedor-menu {
  /* Paleta */
  $bg: v.$gris;
  $text: v.$negro;
  $hover: #007bff;
  $hoverText: v.$blanco;
  $borde: v.$gris_oscuro;

  /* --- Móvil (default): barra superior sticky --- */
  position: sticky;
  top: 0;
  left: 0;
  z-index: 1000;

  background-color: $bg;
  color: $text;

  width: 100%;
  height: auto;

  display: flex;
  align-items: center;
  gap: .5rem;

  padding: .6rem 1rem;
  border-bottom: 4px solid $borde;

  /* scroll horizontal si hay muchos items */
  overflow-x: auto;
  white-space: nowrap;

  /* Título del menú */
  h2 {
    font-size: 1.2rem;
    margin: 0 1rem 0 0;
    color: $text;

    @include m.telefono { font-size: 1.3rem; }
    @include m.tablet   { font-size: 1.4rem; margin: 0 0 1rem 0; }
    @include m.desktop  { font-size: 1.5rem; }
  }

  /* Enlaces */
  a {
    text-decoration: none;
    color: $text;
    font-size: 1rem;
    display: inline-block;
    padding: .6rem 1rem;
    text-align: center;
    border-radius: .5rem;
    transition: background-color .25s ease, color .25s ease, transform .1s ease;

    &:hover {
      background-color: $hover;
      color: $hoverText;
    }
    &:active { transform: translateY(1px); }
    &:focus-visible { outline: 2px solid $hover; outline-offset: 2px; }

    /* Opción activa */
    &[aria-current="page"],
    &.is-active {
      background-color: $hover;
      color: $hoverText;
    }
  }

  /* Hover del contenedor (ligero) */
  &:hover { background-color: $bg; }

  /* Submenú (si lo usas) */
  .submenu {
    display: none;
    flex-direction: column;
    width: 100%;

    a {
      background-color: #444;
      padding: .8rem;
      text-align: left;
      transition: background-color .25s ease, color .25s ease;

      &:hover {
        background-color: #0056b3;
        color: $hoverText;
      }
    }
  }

  .menu-item {
    position: relative;
    width: auto;

    /* En móvil no abrimos submenú por hover (táctil),
       pero lo dejamos para desktop/tablet */
    @include m.tablet {
      width: 100%;
      &:hover {
        .submenu { display: flex; }
        > a {
          background-color: $hover;
          color: $hoverText;
        }
      }
    }
  }

  /* --- Tablet+: Sidebar fija a la izquierda --- */
  @include m.tablet {
    position: fixed;
    top: 0;
    left: 0;

    flex-direction: column;
    align-items: stretch;
    white-space: normal;

    overflow-y: auto;
    overflow-x: hidden;

    width: 250px;
    height: 100vh;
    padding: 1.5rem 1rem;
    border: 4px solid $borde;
    border-right-width: 4px;
    border-bottom: 0;
    box-shadow: 0 4px 16px rgba(0,0,0,.08);

    a {
      display: block;
      width: 100%;
      padding: .85rem 1rem;
      font-size: 1.05rem;
      border-radius: .6rem;
    }
  }

  @include m.desktop {
    width: 280px;
    a { font-size: 1.1rem; padding: .95rem 1.2rem; }
  }
}

/* ===== Utilidad: desplazar el contenido cuando hay sidebar fija ===== */
/* Úsala en tu contenedor principal: <main class="with-sidebar">… */
.with-sidebar {
  @include m.tablet { margin-left: 250px; }
  @include m.desktop { margin-left: 280px; }
}

/* Alternativamente, si tu contenedor principal es .main-control: */
.main-control {
  @include m.tablet { margin-left: 250px; }
  @include m.desktop { margin-left: 280px; }
}
